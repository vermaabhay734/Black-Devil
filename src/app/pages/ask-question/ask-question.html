<app-star-background [fullHeight]="false">
  <div class="container mx-auto px-4 py-12 text-center text-white">
    <h1 class="text-3xl md:text-4xl font-bold mb-4">Ask Your Question</h1>
    <p class="text-lg mb-8">Share your concerns and receive personalized astrological guidance.</p>
  </div>
</app-star-background>

<section class="py-12 bg-white dark:bg-cosmic-black transition-colors duration-300">
  <div class="container mx-auto px-4 max-w-2xl">
    
    <!-- Success Message (when form is submitted) -->
    <div *ngIf="submitted" class="bg-green-100 dark:bg-green-900 border border-green-400 text-green-700 dark:text-green-200 px-4 py-4 rounded relative mb-8 animate-fade-in">
      <h3 class="font-bold text-xl mb-2">Your query has been received!</h3>
      <p>You'll get guidance soon. Thank you for trusting Black Devil with your cosmic questions.</p>
      <button (click)="resetForm()" class="mt-4 bg-cosmic-purple text-white py-2 px-4 rounded hover:bg-cosmic-indigo transition-colors duration-300">
        Ask Another Question
      </button>
    </div>
    
    <!-- Question Form -->
    <form *ngIf="!submitted" [formGroup]="questionForm" (ngSubmit)="onSubmit()" class="bg-white dark:bg-cosmic-black shadow-lg rounded-lg border border-gray-200 dark:border-cosmic-purple p-8">
      <h2 class="text-2xl font-bold mb-6 text-cosmic-purple dark:text-cosmic-gold text-center">Tell Us Your Concerns</h2>
      
      <!-- Name Field -->
      <div class="mb-6">
        <label for="name" class="block text-sm font-medium mb-2">Your Name</label>
        <input 
          type="text" 
          id="name" 
          formControlName="name"
          class="w-full px-4 py-3 rounded-md border border-gray-300 dark:border-cosmic-purple bg-white dark:bg-cosmic-black/70 focus:outline-none focus:ring-2 focus:ring-cosmic-purple transition-colors duration-300"
          [ngClass]="{'border-red-500': f['name'].touched && f['name'].errors}"
        >
        <div *ngIf="f['name'].touched && f['name'].errors" class="text-red-500 text-sm mt-1">
          <span *ngIf="f['name'].errors['required']">Name is required</span>
          <span *ngIf="f['name'].errors['minlength']">Name must be at least 2 characters</span>
        </div>
      </div>
      
      <!-- Email Field -->
      <div class="mb-6">
        <label for="email" class="block text-sm font-medium mb-2">Your Email</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email"
          class="w-full px-4 py-3 rounded-md border border-gray-300 dark:border-cosmic-purple bg-white dark:bg-cosmic-black/70 focus:outline-none focus:ring-2 focus:ring-cosmic-purple transition-colors duration-300"
          [ngClass]="{'border-red-500': f['email'].touched && f['email'].errors}"
        >
        <div *ngIf="f['email'].touched && f['email'].errors" class="text-red-500 text-sm mt-1">
          <span *ngIf="f['email'].errors['required']">Email is required</span>
          <span *ngIf="f['email'].errors['email']">Please enter a valid email</span>
        </div>
      </div>
      
      <!-- Date of Birth Field -->
      <div class="mb-6">
        <label for="dob" class="block text-sm font-medium mb-2">Date of Birth</label>
        <input 
          type="date" 
          id="dob" 
          formControlName="dob"
          class="w-full px-4 py-3 rounded-md border border-gray-300 dark:border-cosmic-purple bg-white dark:bg-cosmic-black/70 focus:outline-none focus:ring-2 focus:ring-cosmic-purple transition-colors duration-300"
          [ngClass]="{'border-red-500': f['dob'].touched && f['dob'].errors}"
        >
        <div *ngIf="f['dob'].touched && f['dob'].errors" class="text-red-500 text-sm mt-1">
          <span *ngIf="f['dob'].errors['required']">Date of birth is required</span>
        </div>
      </div>
      
      <!-- Question Field -->
      <div class="mb-8">
        <label for="question" class="block text-sm font-medium mb-2">Your Question or Problem</label>
        <textarea 
          id="question" 
          rows="5" 
          formControlName="question"
          class="w-full px-4 py-3 rounded-md border border-gray-300 dark:border-cosmic-purple bg-white dark:bg-cosmic-black/70 focus:outline-none focus:ring-2 focus:ring-cosmic-purple transition-colors duration-300 resize-none"
          [ngClass]="{'border-red-500': f['question'].touched && f['question'].errors}"
        ></textarea>
        <div *ngIf="f['question'].touched && f['question'].errors" class="text-red-500 text-sm mt-1">
          <span *ngIf="f['question'].errors['required']">Question is required</span>
          <span *ngIf="f['question'].errors['minlength']">Question must be at least 10 characters</span>
        </div>
      </div>
      
      <!-- Submit Button -->
      <button 
        type="submit" 
        class="w-full bg-cosmic-purple hover:bg-cosmic-indigo text-white font-bold py-3 px-8 rounded-full transform transition duration-300 hover:scale-105 hover:shadow-lg"
      >
        Submit Your Question
      </button>
    </form>
  </div>
</section>

<!-- Additional Information Section -->
<section class="py-12 bg-gray-100 dark:bg-cosmic-black/80 transition-colors duration-300">
  <div class="container mx-auto px-4 max-w-4xl text-center">
    <h2 class="text-2xl md:text-3xl font-bold mb-8 text-cosmic-purple dark:text-cosmic-gold">How It Works</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- Step 1 -->
      <div class="flex flex-col items-center">
        <div class="w-16 h-16 flex items-center justify-center rounded-full bg-cosmic-purple mb-4 text-white font-bold text-xl">1</div>
        <h3 class="text-xl font-semibold mb-2 text-cosmic-purple dark:text-cosmic-gold">Ask Your Question</h3>
        <p>Fill out the form with your details and specific question or concern.</p>
      </div>
      
      <!-- Step 2 -->
      <div class="flex flex-col items-center">
        <div class="w-16 h-16 flex items-center justify-center rounded-full bg-cosmic-purple mb-4 text-white font-bold text-xl">2</div>
        <h3 class="text-xl font-semibold mb-2 text-cosmic-purple dark:text-cosmic-gold">Cosmic Analysis</h3>
        <p>Our astrologer analyzes your cosmic chart based on your date of birth.</p>
      </div>
      
      <!-- Step 3 -->
      <div class="flex flex-col items-center">
        <div class="w-16 h-16 flex items-center justify-center rounded-full bg-cosmic-purple mb-4 text-white font-bold text-xl">3</div>
        <h3 class="text-xl font-semibold mb-2 text-cosmic-purple dark:text-cosmic-gold">Receive Guidance</h3>
        <p>You'll receive your personalized guidance via email within 48 hours.</p>
      </div>
    </div>
  </div>
</section>
